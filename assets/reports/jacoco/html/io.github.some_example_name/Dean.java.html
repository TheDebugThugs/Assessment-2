<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Dean.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.github.some_example_name</a> &gt; <span class="el_source">Dean.java</span></div><h1>Dean.java</h1><pre class="source lang-java linenums">package io.github.some_example_name;

import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.math.Vector2;

/**
 * &lt;code&gt; Dean &lt;/code&gt; is the main enemy of the game, which chases the player's
 * character to attempt to attack them, resetting them to the start of the game.
 */
public class Dean {

    private Vector2 position;
    private Vector2 startPosition;
    private Vector2 velocity;
    private Texture texture;
    private Player player;
    private CellBlockChecker cellBlockChecker;
<span class="nc" id="L20">    private float speed = 30f;</span>
    private boolean repelled;

    /**
     * Constructor for &lt;code&gt; Dean &lt;/code&gt;, with a set of coordinates.
     *
     * @param x Horizontal position for dean to spawn in.
     * @param y Vertical position for dean to spawn in.
     * @param player Player class to follow.
     * @param cellBlockChecker Used to check collision with map tiles.
     */
<span class="nc" id="L31">    public Dean(float x, float y, Player player, CellBlockChecker cellBlockChecker) {</span>
<span class="nc" id="L32">        this.position = new Vector2(x, y);</span>
<span class="nc" id="L33">        this.startPosition = new Vector2(x, y);</span>
<span class="nc" id="L34">        this.texture = new Texture(&quot;Dean-front.png&quot;);</span>
<span class="nc" id="L35">        this.player = player;</span>
<span class="nc" id="L36">        this.cellBlockChecker = cellBlockChecker;</span>
<span class="nc" id="L37">        this.velocity = new Vector2();</span>
<span class="nc" id="L38">        this.repelled = false;</span>
<span class="nc" id="L39">    }</span>

    /**
     * Update position of dean to get closer to player's new position.
     *
     * @param delta Time elapsed since last update.
     */
    public void update(float delta) {
<span class="nc" id="L47">        Vector2 direction = new Vector2(player.getPosition()).sub(position);</span>
<span class="nc" id="L48">        direction.nor();</span>

<span class="nc" id="L50">        float newX = position.x + direction.x * speed * delta;</span>
<span class="nc" id="L51">        float newY = position.y + direction.y * speed * delta;</span>

<span class="nc bnc" id="L53" title="All 2 branches missed.">        if (!cellBlockChecker.isCellBlocked(newX, newY)) {</span>
<span class="nc" id="L54">            position.set(newX, newY);</span>
        }

<span class="nc" id="L57">        tryMoveDiagonally(delta, direction);</span>
<span class="nc" id="L58">    }</span>

    /**
     * Attempt to move dean diagonally towards player if moving
     * in a straight line is not possible.
     */
    private void tryMoveDiagonally(float delta, Vector2 direction) {
<span class="nc" id="L65">        float newX = position.x + direction.x * speed * delta;</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">        if (!cellBlockChecker.isCellBlocked(newX, position.y)) {</span>
<span class="nc" id="L67">            position.x = newX;</span>
<span class="nc" id="L68">            return;</span>
        }

<span class="nc" id="L71">        float newY = position.y + direction.y * speed * delta;</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">        if (!cellBlockChecker.isCellBlocked(position.x, newY)) {</span>
<span class="nc" id="L73">            position.y = newY;</span>
        }
<span class="nc" id="L75">    }</span>

    /**
     * Reset the dean to its starting position when the player is caught.
     */
    public void resetToStart(int caughtNumber) {
<span class="nc" id="L81">        position.set(startPosition);</span>
<span class="nc" id="L82">    }</span>

    public void setRepelled(boolean repelled) {
<span class="nc" id="L85">        this.repelled = repelled;</span>
<span class="nc" id="L86">    }</span>

    /**
     * Draw the dean sprite.
     */
    public void render(SpriteBatch batch) {
<span class="nc bnc" id="L92" title="All 2 branches missed.">        if (!repelled) {</span>
<span class="nc" id="L93">            batch.draw(texture, position.x, position.y, 16, 16);</span>
        }
<span class="nc" id="L95">    }</span>

    public boolean caughtPlayer(Player player) {
<span class="nc" id="L98">        Rectangle deanRect = getBounds();</span>
<span class="nc" id="L99">        Rectangle playerRect =</span>
<span class="nc" id="L100">            new Rectangle(player.getPosition().x, player.getPosition().y, 16, 16);</span>
<span class="nc bnc" id="L101" title="All 4 branches missed.">        return deanRect.overlaps(playerRect) &amp;&amp; !repelled;</span>
    }

    public Vector2 getPosition() {
<span class="nc" id="L105">        return position;</span>
    }

    public Rectangle getBounds() {
<span class="nc" id="L109">        return new Rectangle(position.x, position.y, 16, 16);</span>
    }

    public void dispose() {
<span class="nc" id="L113">        texture.dispose();</span>
<span class="nc" id="L114">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>